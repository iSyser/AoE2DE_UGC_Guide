# 场景编辑器的基础知识

_作者：Alian713_

---

自定义场景允许您自定义游戏模式。从字面上看，它们是游戏可以玩的不同“场景”。

## 场景编辑器

场景编辑器是每个地图制作者用来制作和测试场景的工具。
要在编辑器中创建新场景，

1. 点击主菜单中的 `单人游戏`
2. 点击 `编辑器`
3. 点击 `创建场景`

要在编辑器中打开已保存的场景，

1. 双击上述步骤 3 中编辑器菜单列表中的场景

要在编辑器中打开外部下载的场景，

1. 在上面第 3 步中的编辑器菜单中单击 `打开场景文件夹`
2. 将下载的场景文件放入该文件夹中
3. 为了在编辑器菜单中查看新添加的场景，请返回主菜单并再次打开编辑器菜单。

当您加载新场景时，它是一个供您玩耍的空白画布！

在编辑器中，您可以在顶部看到很多选项卡，它们的功能如下所述：

## 1. 地图

在编辑器的 `地图` 选项卡下，有几个用于更改地图的选项，下面讨论：

### 1.1. 地图风格

1. `空白地图`：此选项生成的整个地图遍布相同地形。加载新场景时生成的默认地图是带有草地地形的空白地图。

2. `随机地图`：此选项从 RMS 生成地图（RMS 全称 Random Map Script，指随机地图脚本，它们是生成像阿拉伯那样的规则地图的脚本）。

3. `种子地图`：此选项使用指定种子从 RMS 生成地图。

!!! question "种子是什么？"

    游戏中特定 RMS 的每次生成过程都对应一个数字，称为“种子”，用于唯一标识该特定 RMS 生成。使用相同的 RMS 和种子生成两次地图将为您提供完全相同的地图！

### 1.2. AI 地图类型

AI 使用此选项来确定他们正在玩的地图类型。如果你的地图上有 AI，这一点很重要，因为你也希望它们在地图上有水时能建造船坞捕鱼或制海。假设地图是游牧主题，那么将 `AI 地图类型`设置为 `游牧` 将允许 AI 玩家以游牧风格正确地玩游戏。

### 1.3. 色调

此设置更改地图的颜色主题（灯光）。默认情况下，它设置为 `空`，这意味着没有颜色主题。 颜色主题仅出于美观原因而使用，不会影响游戏玩法。例如，如果您要制作冬季的地图，那么可以使用冬季颜色主题。

### 1.4. 队伍位置

此设置适用于从 RMS 生成地图时。它确定**同一团队**中的玩家是否按颜色顺序放置，或者是否随机分布在整个地图上

例如，当前队伍设置为玩家 1, 3, 5, 7 vs 玩家 2, 4, 6, 8 并开启队伍位置，则会生成以下地图：

![队伍位置开启](imgs/team_pos_on.png "队伍位置开启")

请注意，同一团队中的玩家 1, 3, 5, 7 已按特定顺序生成（在图像中逆时针方向），玩家 2, 4, 6, 8 也按该顺序生成。

另一方面，在队伍位置关闭的情况下生成地图会给出以下结果：

![队伍位置关闭](imgs/team_pos_off.png "队伍位置关闭")

请注意，现在同一团队中的玩家 1, 3, 5, 7 已生成在随机位置。同样，玩家 2, 4, 6, 8 的生成也没有特定的顺序。另请注意，即使团队内的位置是随机的，玩家仍然按团队分组在地图的每一侧。

更准确地说，此选项按照玩家编号的顺序生成每个团队中的玩家。玩家不必加入上述示例中使用的特定团队也可实现此功能。

### 1.5. 扩展地图

此功能用于扩展现有的您需要使用更多空间的地图。要使用它，

1. 单击 `扩展地图` 复选框。
2. 这会出现两个新选项，`新地图尺寸` 和 `地图偏移`。
3. `新地图尺寸`：将生成的新地图的尺寸。
4. `地图偏移`：确定现有地图在新地图上的放置位置。

例如，将下面 4 玩家地图扩展成 `8 玩家` 的 `新地图尺寸` 和 `北` 的 `地图偏移`

![扩展前](imgs/extend_before.png "扩展前")

得到如下结果：

![扩展后](imgs/extend_after.png "扩展后")

请记住，地图的顶角是北！

![地图方位](imgs/directions.png "地图方位")

### 1.6. 脚本文件名

您需要在此处输入您在地图中使用的任何 XS 脚本的名称。本手册的 `XS 脚本语言` 部分介绍了 XS 脚本

## 2. 地形

在编辑器的 `地形` 选项卡下，有很多用于修改地图地形的选项。下面对它们中的每一个进行讨论：

### 2.1. 地图

此选项允许您在地图上手动放置地形。

1.  `画刷尺寸`：允许您选择一次要影响地图上的区域大小。
2.  `分层模式`：允许您在基础地形之上混合并分层另一种类型的地形。请注意，地形属性（例如可以放置在地形上的建筑物）仍然由基础地形决定。这意味着您将无法在铺有草地的冰上建造建筑物，但可以在铺有冰的草地上建造建筑物
3.  `养眼美景`：确定您放置的地形是否会自动在其上方生成养眼的美景。养眼美景是指仅出于美观原因而生成的植物和其他单位，因此得名“养眼美景”
4.  `岸上无波`：在整个地图上禁用水面上的波浪
5.  `水域清晰度`：这个选项改变了渲染 3D 水域时整个地图上水的样子

    不同的水域清晰度如下：

    === "预置\_主要"

        ![预置_主要](imgs/preset_main.png "预置_主要")

    === "预置\_遗朝 1"

        ![预置_遗朝 1](imgs/preset_fe1.png "预置_遗朝 1")

    === "预置\_遗朝 2"

        ![预置_遗朝 2](imgs/preset_fe2.png "预置_遗朝 2")

    === "预置\_邪恶女巫"

        ![预置_邪恶女巫](imgs/preset_wicked_witch.png "预置_邪恶女巫")

6.  `海滩类型`: 此选项会更改放置水域地形时放置的海滩地形的类型。作为练习，请读者探索不同的海滩类型。

### 2.2. 高地

此选项允许您更改地图上现有图块的高度。

1. `画刷尺寸`: 允许您选择一次要影响地图上的区域大小

!!! tip "提示"

    在编辑器中，有 7 种不同高度的高地可供选择，但高度实际上可以具有更高或更低的值。在编辑器中，也无法使水域具有高度，但实际上也可以赋予水高度。这两件事都需要使用外部地图编辑工具，并且在本指南的 [ASP (场景解析器)](./useful_tools/parser/#basics "跳转至：自定义场景 > 实用工具 > ASP (场景解析器) > 解析器基础知识") 部分中进行了介绍。

### 2.3. 悬崖

此选项允许您在地图上放置悬崖。有两种类型的悬崖可供选择：花岗岩和砂岩。它们的功能完全相同，只是外观不同。

!!! tip "提示"

    悬崖实际上是一个可以旋转的盖亚物体，如果你进入 `单位` 选项卡，并启用 `旋转` 选项，你将能够单击悬崖并旋转它（右键单击将其沿相反方向旋转）。 有一些悬崖物体的旋转面实际上没有图形，因此看起来不可见。但由于它们仍然存在于地图上，只是不可见，因此它们会阻止单位通过它们。这个机制可以用来在地图上建造隐形墙！

### 2.4. 地图复制

此选项允许您复制地图的一部分并使用画刷粘贴。还有旋转和翻转所选区域的选项。

!!! bug

    当旋转矩形选区时，显示画刷的高亮显示区域**不会**相应旋转以显示此旋转，但游戏仍会按照您的预期粘贴旋转。

还有另一个 `更改玩家` 的选项。此选项允许您在粘贴选择时将选区单位的玩家更改为另一个玩家。

### 2.5. 擦除

此选项允许您使用画刷有选择地删除某个区域中的地图部分。使用此功能时可以选择性删除的对象有：

1. 建筑物
2. 盖亚物体
3. 隐形单位
4. 分层地形
5. 树木
6. 单位

!!! abstract "摘要"

    此选项卡中的分层模式选项似乎对删除元素的方式没有影响。

## 3. 玩家

在编辑器的 `玩家` 选项卡下，有几个关于玩家的属性可以更改

### 3.1. 玩家数量

您的场景中的玩家总数

### 3.2. 起始时代

指定当前所选玩家的起始时代

### 3.3. 颜色

指定当前所选玩家的颜色

### 3.4. 起始资源

`食物`、`木材`、`石料`、`黄金` 决定当前选择的玩家资源的起始数量

### 3.5. 人口限制

确定当前所选玩家允许的最大人口限制。该值上限为 500

### 3.6. 基础优先级

这个选项似乎对游戏没有影响。

!!! question "问题"

    如果您知道这是做什么的，请联系本指南的作者之一并让他们知道！

### 3.7. 部落名称

设置当前选定玩家的名称**如果**他们是 AI。不影响人类玩家

### 3.8. 名称字符串 ID

该字段用于引用游戏默认识别的名称。它可用于通过使用游戏识别的值自动设置 `部落名称`。在 AI 上尝试该字段中的值 `1` 并看看会发生什么，留给读者作为练习。

### 3.9. 性格

该玩家使用的 AI（如果该玩家不是人类）。选择 `E3-p2.ai` 来模拟挂机玩家。

### 3.10. 玩家类型

此设置不会对游戏玩法产生影响。这两个选项之间的唯一区别是，将其设置为 `任一` 不会自动用 AI 填充大厅空位。将其设置为 `AI` 将在大厅游戏中自动为您设置该玩家

### 3.11. 文明

设置当前选择玩家的文明

### 3.12. 锁定文明

阻止当前选择的玩家在大厅中改变他们的文明

### 3.13. 建筑风格

将当前选择的玩家的建筑风格设置更改为另一个文明的。

### 3.14. 交换玩家

将当前选定的玩家的设置与指定的玩家交换。

## 4. 单位

在 `单位` 选项卡下，有多个用于放置和操作单位的选项。

### 4.1. 放置单位

可以通过此选项卡中的 4 个菜单将单位放置在地图上：

游戏将游戏中的所有单位对象分为 4 类：`单位`、`建筑物`、`英雄`、`其他`。

1. `单位` 允许您放置常规游戏中最常见的单位。
2. `建筑物` 允许您放置游戏中的大多数不同建筑物。
3. `英雄` 允许您放置在战役和场景中使用的英雄单位。
4. `其他` 这些是不直接属于上述任何类别的杂项单位。

默认情况下，单位以随机旋转面放置，但是在放置单位之前向上/向下滚动可让您将其旋转面固定为您想要的任何方向。要返回到随机旋转面放置，请在菜单中选择另一个单位，然后重新选择要放置的单位。

在放置这些单位时，将玩家更改为盖亚将显示额外的隐藏单位，例如树木、矿藏、狼以及其他在正常游戏中只有盖亚才能拥有的单位。游戏中还有一些即使使用盖亚放置也无法在编辑器列表中看到的单位。

有两种方法可以使用这些隐藏单位：

1. 使用创建对象触发器，用隐藏单位的对象 ID
2. 使用高级数据编辑器（A.G.E.）取消隐藏编辑器中的隐藏单位，以允许手动放置。

如果您不知道如何执行其中任何一个，您可以参考本指南的 [效果](./triggers/effects "跳转至：自定义场景 > 触发器 > 效果") 部分了解第一个选项 ，并/或 参阅本指南的 [取消隐藏编辑器单位]("跳转至：取消隐藏编辑器单元 NON EXISTENT") 部分

### 4.2. 删除单位

已经放置在地图上的单位可以通过以下方式从地图上删除：

1. 第一个也是最明显的选项是使用此选项卡中的 `删除` 选项。这使我们能够从地图上一一删除单位。
2. 如果您需要删除大量单位，第一个选项可能会很乏味，因此第二个选项是使用 `地形` 选项卡下 `擦除` 菜单中的 `擦除单位` 选项。请参阅 [2.5. 擦除](./#25 "跳转至：2.5. 擦除") 了解如何使用 `擦除` 选项。

### 4.3. 移动单位

使用此选项卡中的 `移动` 选项可以在地图上移动已放置在地图上的单位。

### 4.4. 旋转单位

可以使用此选项卡中的 `旋转` 选项来旋转已放置在地图上的单位。选择 `旋转` 选项后，单击某个单位将使其顺时针旋转，右键单击该单位将使其逆时针旋转。

### 4.5. 选择单位

当选择一个单位时，会显示其生命值、攻击力、护甲值以及驻扎在其中的单位等统计数据。其他单位内部的单位可以使用驻扎删除来删除。

### 4.6. 转化单位

此选项允许您将现有单位**从**一个或多个玩家转换**到**另一位玩家。

启用后，菜单中会出现 9 个新选项（右侧），用于选择要**从**何玩家转换单位。当前选定的玩家（左侧）是将单位转换**到**的玩家。选择 `画刷尺寸` 后，当您单击某个区域时，属于要**从**何转换的玩家的所有单位都将转换**到**所选玩家。

请记住，使用复选框在右侧选择要**从**何转换的玩家，而要转换**到**的玩家是在左侧下拉列表中选择的玩家！

## 5. 外交

在 `外交` 选项卡下，有一些选项可以更改游戏的外交设置：

### 5.1. 外交立场

右侧的复选框网格允许您更改每个玩家与所有其他玩家的立场。

### 5.2. 锁定队伍

此选项使得游戏中的玩家无法更改队伍。它们仍然可以通过触发器进行更改。

### 5.3. 玩家选择队伍

禁用此选项将不允许玩家在游戏开始前在大厅中选择队伍。然而，队伍不会被锁定，并且仍然可以在游戏中更改，**除非**也启用了 `锁定队伍` 选项。

### 5.4. 随机起始点

此选项使得游戏中的所有玩家使用随机颜色，而忽略他们在大厅中选择的颜色。如果你没有为某种颜色的玩家创建任何单位，则游戏会创建默认单位。

注意，即使游戏中没有使用的颜色也可能被随机分配到。例如，场景中只有两名玩家，分别是蓝色与红色，并且蓝色有许多兵营和城堡，则开启此选项后，两名玩家的颜色可能为绿色和紫色，在这种情况下，由于没有玩家控制蓝色，因此蓝色的兵营和城堡，以及其他所有的单位都会被移除。

## 6. 全局胜利

在编辑器的 `全局胜利` 选项卡下，有一些选项允许您为所有玩家定义自定义胜利条件。下面讨论它们：

### 6.1. 标准

玩家通过以下方式获胜：击败所有敌人，或捕获 5 个圣物并持有它们 200 年，或建造并持有奇观 200 年

### 6.2. 征服

玩家只有击败所有敌方玩家才能获胜

### 6.3. 得分

第一个达到指定分数的玩家获胜

### 6.4. 时限

游戏将进行到指定的时间限制。当达到时间限制时，得分最高的玩家获胜

### 6.5. 定制

可以使用以下选项自定义此胜利条件：

1. `征服` 这与上面第 2 点的胜利条件相同
2. `探索` 第一个达到探索地图指定百分比的玩家赢得游戏。（该选项前面有一个文本框来指定百分比）
3. `圣物` 第一个捕获指定数量圣物的玩家获胜。与标准胜利不同的是，玩家一旦收集到圣物就获胜，不需要持有它们 200 年。（该选项前面有一个文本框可以指定数量）
4. `任一` 玩家可以完成上面启用的任何一个胜利条件来获胜
5. `所有` 玩家必须完成上面启用的所有胜利条件才能获胜

### 6.6. 第二游戏模式

选择并合并不同游戏模式，以添加其他胜利条件：

1. `帝国战争模式` 这将会使玩家产生更多村民、营地、房屋和农田。
2. `主城保卫战模式` 一旦玩家的城镇中心被摧毁，将会输掉比赛。您无法再建造其他城镇中心。
3. `弑君模式` 这会使玩家产生一个国王与更多村民。若您失去了国王将会战败。
4. `占山为王模式` 此模式需要玩家守住地图上所有纪念碑才能获胜。

!!! bug

    即使不在 `第二游戏模式` 面板下，`弑君模式` 也始终显示，并遮挡了其他元素。

## 7. 选项

在编辑器的 `选项` 选项卡下，有以下选项：

### 7.1. 视点

使用 `设置视角` 按钮将指定玩家的起始视点（PoV）设置为编辑器中的当前视角。设置视角后，通过单击 `转到视角` 检查其是否有效

### 7.2. 测试难度

设置 `测试难度`

### 7.3. 完整科技树

为所有玩家启用 `完整科技树`。

!!! warning "警告"

    与普通游戏中的完整科技树选项不同，此选项不会禁用文明奖励！

### 7.4. 禁用对象

通过单击 `<` 箭头将建筑物、单位或科技从 `完整列表` 移动到 `禁用列表` 来禁用它们。单击 `>` 从禁用列表中删除对象。`<<` 和 `>>` 一次移动所有项目

注意：不建议使用此选项来禁用对象，因为有更好的方法，可以通过本指南的 `触发器` 部分中介绍的触发器来执行此操作。

### 7.5. 碰撞与修正

启用此选项会使静止单位移开，以让移动单位通过。

### 7.6. 村民强制丢弃

使村民在任务切换时立即失去资源，而不是在他们实际开始执行其他任务时才失去资源。这模仿了遗朝的行为，即如果村民从猎人转变为羊，他们不会失去任何食物。

### 7.7. 禁止更改人类队伍

为**人类**玩家之间锁定队伍。

## 8. 消息

在 `消息` 选项卡下，有用于在场景中显示文本的不同选项。

### 8.1. 场景说明

此选项允许您设置 `目标面板` 的 `说明` 选项卡中显示的文本。

!!! Note "注意"

    单击屏幕顶部科技树按钮右侧的按钮可以打开 `目标面板`。

### 8.2. 目标

此选项允许您设置 `目标面板` 的 `目标` 选项卡中显示的文本。

### 8.3. 提示

此选项允许您设置 `目标面板` 的 `提示` 选项卡中显示的文本。

### 8.4. 侦察

此选项允许您设置 `目标面板` 的 `侦察` 选项卡中显示的文本。

### 8.5. 成功

此选项允许您设置在统计屏幕之前向赢得游戏的玩家显示的文本。

### 8.6. 失败

此选项允许您设置在统计屏幕之前向输掉游戏的玩家显示的文本。

## 9. 电影艺术

在 `电影艺术` 选项卡下，有一些选项可以更改场景之前或之后显示的影片剪辑。

!!! bug

    这些主要用于战役中，在撰写本指南时，在场景中更改它们的功能存在缺陷。

## 10. 触发器

在 `触发器` 选项卡下，可以在场景中操作触发器。触发器是场景中最强大的组成部分，因为它们允许我们在游戏中执行大量不同的操作。它们可用于向场景添加更多动态和游戏机制，几乎任何您能想到的事情（在 AoE2 及其自身限制的范围内）都可以使用触发器以某种方式完成。

有关如何使用触发器的详细信息，请参阅本指南的 [触发器](./triggers "跳转至：自定义场景 > 触发器 > 触发器基础知识") 部分。

## 11. 实用热键

了解一些热键有助于加快场景制作和测试工作流程

1. 在下拉列表上上下滚动会使值也在列表中上下移动
2. 按下或按住任意对象选择菜单中的字母将循环浏览对象列表
3. 如果您所在的选项卡可以选择玩家（触发器除外），则按数字 ++1++-++8++ 将切换到该玩家
4. 如果您正在 `地形` 选项卡下，则可以按数字 ++1++-++9++ 或 ++num1++-++num9++ 快速更改 `画刷尺寸`
5. 测试场景时，按 ++ctrl+shift++ 和 `F#`（其中 # 是玩家编号）将让您控制该玩家。例如，按 ++ctrl+shift+f4++ 会将您的控制转移到玩家 4
6. 放置物体时滚动会旋转它们。一些盖亚建筑物和单位对于不同的旋转具有完全不同的图形！
7. 按一次 ++ctrl+g++ 可以关闭网格放置单位。再次按下它可以将单位堆叠并关闭网格放置单位。按第三次可以开启网格放置单位并启用堆叠。按第四次即可恢复默认状态！甚至建筑物也可以使用此选项堆叠！
8. ++ctrl+q++ 退出场景编辑器
9. ++ctrl+a++ 切换地图上每个单位的碰撞框
10. ++ctrl+s++ 保存场景
11. ++ctrl+l++ 加载场景
12. ++ctrl+n++ 创建一个新场景
13. 选项卡
    1. ++f1++-++f10++ 在场景编辑器中选择一个选项卡。++f1++ - 地图，++f2++ - 地形等
    2. ++ctrl+w++ 切换到消息选项卡
    3. ++ctrl+r++ 切换到触发器选项卡
    4. ++ctrl+t++ 切换到地形选项卡
    5. ++ctrl+u++ 切换到单位选项卡
    6. ++ctrl+o++ 切换到选项选项卡
    7. ++ctrl+p++ 切换到玩家选项卡
    8. ++ctrl+d++ 切换到外交选项卡
    9. ++ctrl+c++ 切换到电影选项卡
    10. ++ctrl+v++ 切换到全局胜利选项卡
    11. ++ctrl+m++ 切换到地图选项卡
14. ++ctrl+space++ 测试场景（目前有 bug，导致游戏崩溃 D:）
