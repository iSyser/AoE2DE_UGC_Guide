# 触发器基础知识

_作者：Alian713_

---

## 触发器是什么

通常，常规 AoE2 游戏在游戏过程中不会发生任何游戏玩法变化。使用触发器使我们能够在游戏**运行时**将数据修改（以及更多）引入到游戏中！这意味着，例如，您可能会遇到这样的情况：在 30 分钟标记处，所有玩家都必须支付一定量的资源，否则将面临一些后果。另一个例子是玩家采取的某些操作可能会导致不同的事件。

如果你曾经玩过 CBA（Castle Blood Automatic，或者感叹玩 CBA 的人）或者玩过游戏中的任何战役，那么所有这些都可以通过场景中的触发器来实现。触发器功能的另一个很好的例子是 [交互式构建顺序指南](https://www.ageofempires.com/mods/details/47747/ "交互式构建顺序指南") 这个游戏模式。

触发器将动态引入游戏中，并允许我们制作如上所述的有趣的游戏模式。学习如何使用触发器很简单，每个地图制作者都应该熟悉它们，以便能够充分利用场景！

## 1. 入门：用户界面

要在场景中使用触发器，您需要转到编辑器中的 `触发器` 选项卡。在这里，您将在左侧看到两个列表框。顶部的列表框列出了场景中所有现有的触发器。选择触发器后，底部的列表框会显示该触发器的条件和效果列表。

列表框下面的按钮有什么作用？

1. 在第一个框下：

    1. `新建`：创建一个新的触发器。
    2. `复制`：选择触发器后，单击此按钮将创建一个新触发器，该触发器与所选触发器具有完全相同的设置、条件和效果。
    3. `删除`：删除选中的触发器。这不能被撤消！
    4. `信息`：显示所选触发器的设置

2. 在第二个框下：

    1. `新效果`：在选定的触发器下创建一个新效果。
    2. `新条件`：在选定的触发器下创建一个新条件。
    3. `删除`：删除选中的条件或效果。这不能被撤消！
    4. `复制`：复制选定的条件或效果。

但是等等，效果和条件是什么？效果和条件是触发器的基本元素，使我们能够采取某些行动、做出决定并做很多更酷的事情。手册的 [效果](./effects "跳转至：触发器 > 效果") 和 [条件]("跳转至：触发器 > 条件 NON EXISTENT") 部分更详细地介绍了它们

现在，简单地说，效果是触发器必须采取的操作，而条件字面上是在允许采取操作之前必须满足的事情。

## 2. 触发器设置

选择触发器后，会显示与其相关的设置。以下是所有设置及其作用的描述：

1. `启用`：此属性控制触发器是否从游戏开始就处于激活状态。激活的触发器是一种在满足其条件时可以立即执行其效果的触发器。如果触发器未激活，则即使满足其条件，其效果也不会执行。
2. `循环`：此属性控制触发器在运行一次后是否自行停用，或者是否在满足条件时重复执行其效果。触发器每秒循环一次
3. `描述`：该文本框用于在场景的 `目标` 面板中显示目标。请参阅下面的设置：
4. `显示为目标`：选中此复选框后，`描述` 字段中的文本将显示在场景的 `目标` 面板中。`目标` 面板可以通过单击游戏中屏幕顶部科技树旁边的按钮打开。该面板对游戏中的**所有**玩家都可见。
5. `描述字符串表 ID`：该字段与 [3.8. 名称字符串 ID](../#38-id "跳转至：自定义场景 > 场景基础 > 3.8. 名称字符串 ID") 相同
6. `简短描述`：此文本框用于在游戏中的屏幕上显示目标。请参阅下面的设置：
7. `在屏幕上显示`：选中此复选框后，`简短描述` 字段中的文本将显示在游戏中**所有**玩家的屏幕右侧。如果启用此功能后没有显示，请尝试按 ++f4++ 键（或分数按钮）几次。
8. `使为标题`：选择此复选框并选择 `在屏幕上显示` 时，特定的 `简短描述` 将以更大的字体显示。
9. `静音目标`：选中此复选框后，完成目标将不会触发声音。
10. `显示顺序`：目标按优先级降序显示。
11. `简短描述字符串表 ID`：该字段与 `5. 描述字符串表 ID` 相同。

## 3. 触发器的一般信息

1. 当显示为目标的触发器内的条件得到满足时，目标将被标记为已完成。已完成的目标在 `目标` 面板中带有删除线，并在屏幕上显示时勾选。禁用与该目标相关的触发器将从屏幕或 `目标` 面板中完全删除该目标。

2. 无条件触发器将立即执行激活后的效果。

3. 场景中存在最多 `4294967295` 个触发器的理论限制。据了解，旧版游戏中的“掷骰子”使用了大约 `16000` 个触发器。一个触发器内存在最多 `2147483647` 个效果和 `2147483647` 个条件的理论限制。据了解，场景 Perk Pandemonia 在一个触发器内最多可使用 `250` 个效果。

4. 触发器按照它们创建的顺序执行，而不是按照它们从上到下出现的顺序。一个触发器内的效果也按照它们创建的顺序执行，而不是按照它们从上到下出现的顺序。触发器内的条件也会根据它们的创建顺序进行检查。

5. 要执行触发器的效果，必须满足触发器的所有条件，除了一种情况（使用 或 条件时）。一旦遇到错误的条件，触发器将放弃检查其余条件，但在一种情况下（使用 或 条件时）除外。这些规则在手册的 [条件]("跳转到：触发器 > 条件 NON EXISTENT") 部分中有更详细的讨论。
